<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ToadAid — Sigil Catalog</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- Keep your site look -->
  <link rel="stylesheet" href="/assets/css/style.css">
  <style>
    /* minimal helpers only */
    .container{max-width:1200px;margin:0 auto;padding:0 6px}
    .breadcrumbs{margin:10px 0;color:#5a715f}
    .head{display:flex;gap:12px;align-items:center}
    .avatar{width:64px;height:64px;border-radius:50%;object-fit:cover;background:#ddd}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:16px;margin:18px 0 28px}
    .card{background:#fff;border:1px solid #e2d9b3;border-radius:16px;padding:12px;box-shadow:0 8px 24px rgba(0,0,0,.08);border-left:6px solid #d9b200}
    .card:hover{box-shadow:0 10px 28px rgba(0,0,0,.12)}
    .row{display:flex;gap:12px;align-items:flex-start}
    .thumb{width:120px;height:auto;border-radius:10px;object-fit:cover}
    .meta{color:#425a47;font-size:.92rem;margin:.15rem 0 .35rem}
    .chips{margin:.5rem 0 0}
    .chip{display:inline-block;background:#f0ead4;border:1px solid #e2d9b3;border-radius:999px;padding:2px 8px;font-size:.8rem;margin-right:6px}
    .actions{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    .btn{border:1px solid #d9d9d9;background:#fff;border-radius:10px;padding:8px 10px;font-size:.9rem;cursor:pointer}
    .btn:hover{background:#f7f7f7}
    .btn-primary{border-color:#355e3b;background:#355e3b;color:#fff}
    .btn-primary:hover{filter:brightness(.95)}
  </style>
</head>
<body>

<header class="container">
  <nav class="breadcrumbs">
    <a href="/">Home</a> / <a href="/honors/">Honors</a> / <a href="/Contributors/">Contributors</a> / Sigil
  </nav>

  <div class="head">
    <img class="avatar" src="/Contributors/Sigil/images/sigil.png" alt="Sigil avatar">
    <div>
      <h1 style="margin:0">Toadaid Builder of @SigilOfConcord</h1>
      <p style="margin:.25rem 0 0"><em>Lore Scribe · Keeper of Concord</em></p>
    </div>
  </div>
</header>

<main class="container">
  <h2>All Honors</h2>
  <section id="list" class="grid" aria-live="polite"></section>

  <p>← <a href="/honors/">Back to Honors</a> · <a href="/Contributors/">All Contributors</a></p>
</main>

<script>
async function copyLink(url){
  try{
    await navigator.clipboard.writeText(url);
    alert('Link copied');
  }catch(_){
    prompt('Copy this link:', url);
  }
}

(async () => {
  // load from sigil.json (must sit in the same folder)
  const data = await (await fetch('./sigil.json?v='+Date.now())).json();

  const honors = (data.honors||[]).slice().sort((a,b)=> (b.date||'').localeCompare(a.date||''));
  const wrap = document.getElementById('list');

  wrap.innerHTML = honors.map(h => {
    const tagHtml = (h.tags && h.tags.length)
      ? `<p class="chips">${h.tags.map(t=>`<span class="chip">${t}</span>`).join(' ')}</p>` : '';

    // build absolute URL for Copy link
    const abs = (new URL(h.page, location.origin)).toString();

    return `
      <article class="card" id="${h.id}">
        <div class="row">
          <img class="thumb" src="${h.image}" alt="${h.title}">
          <div style="flex:1">
            <h3 style="margin:.1rem 0 .25rem"><a href="${h.page}">${h.title}</a></h3>
            <div class="meta">${h.date ? h.date : ''}${h.tags && h.tags.length ? ' · ' + h.tags.map(t=>'#'+t).join(' ') : ''}</div>

            <div class="actions">
              <a class="btn btn-primary" href="${h.page}">Open scroll</a>
              ${h.x_url ? `<a class="btn" href="${h.x_url}" target="_blank" rel="noopener">View on X</a>` : ''}
              <button class="btn" type="button" onclick="copyLink('${abs}')">Copy link</button>
            </div>

            ${tagHtml}
          </div>
        </div>
      </article>
    `;
  }).join('');
})();
</script>

</body>
</html>
